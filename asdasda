-- My Fluent Inspired UI Library
-- Original source inspired by Fluent design

local MyFluent = {}

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

local Library = {
	Version = "1.0.0",
	Windows = {},
	Theme = "Dark",
	Themes = {
		Dark = {
			Background = Color3.fromRGB(25, 25, 25),
			Header = Color3.fromRGB(20, 20, 20),
			Text = Color3.fromRGB(240, 240, 240),
			SubText = Color3.fromRGB(170, 170, 170),
			Element = Color3.fromRGB(35, 35, 35),
			ElementBorder = Color3.fromRGB(50, 50, 50),
			ElementTransparency = 0.8,
			HoverTransparency = 0.6,
			SchemeColor = Color3.fromRGB(96, 205, 255),
		},
		Light = {
			Background = Color3.fromRGB(245, 245, 245),
			Header = Color3.fromRGB(230, 230, 230),
			Text = Color3.fromRGB(20, 20, 20),
			SubText = Color3.fromRGB(100, 100, 100),
			Element = Color3.fromRGB(255, 255, 255),
			ElementBorder = Color3.fromRGB(200, 200, 200),
			ElementTransparency = 0.9,
			HoverTransparency = 0.7,
			SchemeColor = Color3.fromRGB(0, 120, 255),
		},
	},
}

function Library:CreateWindow(config)
	config = config or {}
	local Title = config.Title or "Window"
	local Size = config.Size or UDim2.new(0, 500, 0, 350)
	local Theme = config.Theme or "Dark"

	local Window = {}

	local ScreenGui = Instance.new("ScreenGui")
	ScreenGui.Name = "MyFluentUI"
	ScreenGui.Parent = game.CoreGui
	ScreenGui.ResetOnSpawn = false

	local MainFrame = Instance.new("Frame")
	MainFrame.Name = "Main"
	MainFrame.Size = Size
	MainFrame.Position = UDim2.new(0.5, -Size.X.Offset / 2, 0.5, -Size.Y.Offset / 2)
	MainFrame.BackgroundColor3 = Library.Themes[Theme].Background
	MainFrame.BorderSizePixel = 0
	MainFrame.Parent = ScreenGui

	local UICorner = Instance.new("UICorner")
	UICorner.CornerRadius = UDim.new(0, 8)
	UICorner.Parent = MainFrame

	local Header = Instance.new("Frame")
	Header.Size = UDim2.new(1, 0, 0, 40)
	Header.BackgroundColor3 = Library.Themes[Theme].Header
	Header.BorderSizePixel = 0
	Header.Parent = MainFrame

	local HeaderCorner = Instance.new("UICorner")
	HeaderCorner.CornerRadius = UDim.new(0, 8)
	HeaderCorner.Parent = Header

	local TitleLabel = Instance.new("TextLabel")
	TitleLabel.Text = Title
	TitleLabel.Size = UDim2.new(1, -20, 1, 0)
	TitleLabel.Position = UDim2.new(0, 10, 0, 0)
	TitleLabel.BackgroundTransparency = 1
	TitleLabel.TextColor3 = Library.Themes[Theme].Text
	TitleLabel.TextSize = 16
	TitleLabel.Font = Enum.Font.GothamBold
	TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
	TitleLabel.Parent = Header

	local CloseButton = Instance.new("TextButton")
	CloseButton.Text = "Ã—"
	CloseButton.Size = UDim2.new(0, 30, 0, 30)
	CloseButton.Position = UDim2.new(1, -35, 0, 5)
	CloseButton.BackgroundTransparency = 1
	CloseButton.TextColor3 = Library.Themes[Theme].Text
	CloseButton.TextSize = 20
	CloseButton.Font = Enum.Font.GothamBold
	CloseButton.Parent = Header
	CloseButton.MouseButton1Click:Connect(function()
		ScreenGui:Destroy()
	end)

	local Content = Instance.new("Frame")
	Content.Size = UDim2.new(1, 0, 1, -40)
	Content.Position = UDim2.new(0, 0, 0, 40)
	Content.BackgroundTransparency = 1
	Content.Parent = MainFrame

	local TabHolder = Instance.new("Frame")
	TabHolder.Size = UDim2.new(0, 120, 1, 0)
	TabHolder.BackgroundColor3 = Library.Themes[Theme].Header
	TabHolder.BorderSizePixel = 0
	TabHolder.Parent = Content

	local TabList = Instance.new("UIListLayout")
	TabList.SortOrder = Enum.SortOrder.LayoutOrder
	TabList.Padding = UDim.new(0, 5)
	TabList.Parent = TabHolder

	local TabPadding = Instance.new("UIPadding")
	TabPadding.PaddingTop = UDim.new(0, 10)
	TabPadding.PaddingLeft = UDim.new(0, 10)
	TabPadding.Parent = TabHolder

	local Selector = Instance.new("Frame")
	Selector.Size = UDim2.new(0, 4, 0, 30)
	Selector.BackgroundColor3 = Library.Themes[Theme].SchemeColor
	Selector.BorderSizePixel = 0
	Selector.Position = UDim2.new(0, 0, 0, 10)
	Selector.AnchorPoint = Vector2.new(0, 0.5)
	Selector.Parent = TabHolder

	local Container = Instance.new("Frame")
	Container.Size = UDim2.new(1, -120, 1, 0)
	Container.Position = UDim2.new(0, 120, 0, 0)
	Container.BackgroundTransparency = 1
	Container.Parent = Content

	local Tabs = {}
	local CurrentTab = nil

	function Window:AddTab(name)
		local Tab = {}

		local TabButton = Instance.new("TextButton")
		TabButton.Text = name
		TabButton.Size = UDim2.new(0, 100, 0, 30)
		TabButton.BackgroundTransparency = 1
		TabButton.TextColor3 = Library.Themes[Theme].Text
		TabButton.TextSize = 14
		TabButton.Font = Enum.Font.Gotham
		TabButton.Parent = TabHolder

		local TabFrame = Instance.new("ScrollingFrame")
		TabFrame.Size = UDim2.new(1, 0, 1, 0)
		TabFrame.BackgroundTransparency = 1
		TabFrame.ScrollBarThickness = 5
		TabFrame.Visible = false
		TabFrame.Parent = Container

		local ListLayout = Instance.new("UIListLayout")
		ListLayout.SortOrder = Enum.SortOrder.LayoutOrder
		ListLayout.Padding = UDim.new(0, 10)
		ListLayout.Parent = TabFrame

		local Padding = Instance.new("UIPadding")
		Padding.PaddingTop = UDim.new(0, 10)
		Padding.PaddingLeft = UDim.new(0, 10)
		Padding.PaddingRight = UDim.new(0, 10)
		Padding.Parent = TabFrame

		TabButton.MouseButton1Click:Connect(function()
			if CurrentTab then
				CurrentTab.Frame.Visible = false
			end
			TabFrame.Visible = true
			CurrentTab = Tab

			TweenService:Create(Selector, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {
				Position = UDim2.new(0, 0, 0, TabButton.AbsolutePosition.Y - TabHolder.AbsolutePosition.Y + 15)
			}):Play()
		end)

		Tab.Frame = TabFrame
		Tab.Button = TabButton

		function Tab:AddSection(title)
			local Section = {}

			local SectionFrame = Instance.new("Frame")
			SectionFrame.Size = UDim2.new(1, 0, 0, 40)
			SectionFrame.BackgroundColor3 = Library.Themes[Theme].Element
			SectionFrame.BackgroundTransparency = Library.Themes[Theme].ElementTransparency
			SectionFrame.BorderSizePixel = 0
			SectionFrame.Parent = TabFrame

			local SectionCorner = Instance.new("UICorner")
			SectionCorner.CornerRadius = UDim.new(0, 6)
			SectionCorner.Parent = SectionFrame

			local SectionStroke = Instance.new("UIStroke")
			SectionStroke.Color = Library.Themes[Theme].ElementBorder
			SectionStroke.Transparency = 0.5
			SectionStroke.Parent = SectionFrame

			local SectionTitle = Instance.new("TextLabel")
			SectionTitle.Text = title
			SectionTitle.Size = UDim2.new(1, -20, 1, 0)
			SectionTitle.Position = UDim2.new(0, 10, 0, 0)
			SectionTitle.BackgroundTransparency = 1
			SectionTitle.TextColor3 = Library.Themes[Theme].Text
			SectionTitle.TextSize = 14
			SectionTitle.Font = Enum.Font.GothamBold
			SectionTitle.TextXAlignment = Enum.TextXAlignment.Left
			SectionTitle.Parent = SectionFrame

			local ElementsFrame = Instance.new("Frame")
			ElementsFrame.Size = UDim2.new(1, 0, 0, 0)
			ElementsFrame.Position = UDim2.new(0, 0, 1, 10)
			ElementsFrame.BackgroundTransparency = 1
			ElementsFrame.Parent = SectionFrame

			local ElementsLayout = Instance.new("UIListLayout")
			ElementsLayout.SortOrder = Enum.SortOrder.LayoutOrder
			ElementsLayout.Padding = UDim.new(0, 5)
			ElementsLayout.Parent = ElementsFrame

			ListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
				TabFrame.CanvasSize = UDim2.new(0, 0, 0, ListLayout.AbsoluteContentSize.Y + 20)
				SectionFrame.Size = UDim2.new(1, 0, 0, ElementsLayout.AbsoluteContentSize.Y + 50)
			end)

			function Section:AddButton(text, callback)
				local Button = Instance.new("TextButton")
				Button.Text = text
				Button.Size = UDim2.new(1, 0, 0, 35)
				Button.BackgroundColor3 = Library.Themes[Theme].Element
				Button.BackgroundTransparency = Library.Themes[Theme].ElementTransparency
				Button.TextColor3 = Library.Themes[Theme].Text
				Button.TextSize = 14
				Button.Font = Enum.Font.Gotham
				Button.AutoButtonColor = false
				Button.Parent = ElementsFrame

				local ButtonCorner = Instance.new("UICorner")
				ButtonCorner.CornerRadius = UDim.new(0, 4)
				ButtonCorner.Parent = Button

				local ButtonStroke = Instance.new("UIStroke")
				ButtonStroke.Color = Library.Themes[Theme].ElementBorder
				ButtonStroke.Transparency = 0.5
				ButtonStroke.Parent = Button

				local Hovering = false
				Button.MouseEnter:Connect(function()
					Hovering = true
					TweenService:Create(Button, TweenInfo.new(0.2), {
						BackgroundTransparency = Library.Themes[Theme].HoverTransparency
					}):Play()
				end)
				Button.MouseLeave:Connect(function()
					Hovering = false
					TweenService:Create(Button, TweenInfo.new(0.2), {
						BackgroundTransparency = Library.Themes[Theme].ElementTransparency
					}):Play()
				end)
				Button.MouseButton1Click:Connect(function()
					if callback then callback() end
				end)

				return Button
			end

			return Section
		end

		table.insert(Tabs, Tab)
		if not CurrentTab then
			TabButton.MouseButton1Click:Invoke()
		end

		return Tab
	end

	table.insert(Library.Windows, Window)
	return Window
end

return Library
